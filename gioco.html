<!DOCTYPE html>
<html lang="it">
<head>
    <style>
        .header-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            min-width: 0;
            padding: 0 8px;
            box-sizing: border-box;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 0;
        }
        .header-center {
            flex: 1 1 0%;
            display: flex;
            justify-content: center;
            align-items: center;
            min-width: 0;
            z-index: 1;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 0;
        }
        .main-title {
            text-transform: uppercase;
            font-weight: bold;
            letter-spacing: 2px;
            font-size: 1.6rem;
            margin: 0;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1 1 0%;
        }
        @media (max-width: 600px) {
            .main-title {
                font-size: 1.1rem;
            }
            .header-row {
                padding: 0 2px;
            }
        }
      .top-bar {
        padding-top: 0.7em;
        padding-bottom: 0.7em;
        min-height: 64px;
        background: #2a4d69;
        transition: min-height 0.2s, padding 0.2s;
      }
      @media (max-width: 600px) {
        .top-bar {
          min-height: 48px;
          padding-top: 0.4em;
          padding-bottom: 0.4em;
        }
      }
    </style>
  <meta charset="UTF-8">
  <title>Gioco</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header class="top-bar">
    <div class="header-row">
        <div class="header-left">
            <button id="hamburger" class="header-btn">&#9776;</button>
            <button id="back-btn" class="header-btn" title="Torna ai livelli" aria-label="Indietro" style="margin-left:8px;">
                <span style="font-size:1.5em;">&#8592;</span>
            </button>
        </div>
            <h1 id="game-title-header" class="main-title title-common">Gioco</h1>
        <div class="header-right">
            <button id="trophy" class="header-btn" title="Esercizi svolti">&#x1F3C6;</button>
            <button id="user" class="header-btn" title="Accedi/Registrati">&#128100;</button>
        </div>
    </div>
</header>
<script>
document.addEventListener('DOMContentLoaded', function () {
    // Freccia torna ai livelli
    const backBtn = document.getElementById('back-btn');
    if (backBtn) {
        backBtn.addEventListener('click', function () {
            // Torna alla pagina dei livelli, mantenendo il livello scelto
            const params = new URLSearchParams(window.location.search);
            const livello = params.get('livello') || '';
            window.location.href = livello ? `livello.html?livello=${livello}` : 'livello.html';
        });
    }
    // Titolo dinamico del gioco scelto
    const params = new URLSearchParams(window.location.search);
    const gioco = params.get('gioco');
    const titolo = document.getElementById('game-title-header');
    if (titolo && gioco) {
        // Mostra "Gioco 1", "Gioco 2" ecc.
        let nome = '';
        if (gioco.match(/^\d+$/)) nome = `Gioco ${gioco}`;
        else if (gioco.match(/^g(\d)$/i)) nome = `Gioco ${gioco.slice(1)}`;
        else nome = `Gioco`;
        titolo.textContent = nome;
    }
});
</script>


<section id="gamePage" class="page hidden" style="margin-top:12px">
    <div class="game-view">
        <div class="game-container card" id="gameContainer">
            <div class="game-controls">
                <div>
                    <h4 id="gameTitle" style="margin:0">Gioco</h4>                
                </div>
                <div style="display:flex;gap:8px;align-items:center">
                    <div class="timer" id="timer">00:00</div>
                    <button class="btn" id="btn-fullscreen" aria-pressed="false" style="display:flex;align-items:center;gap:4px">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                                                    <path d="M1 8V3a2 2 0 0 1 2-2h5a1 1 0 1 1 0 2H3v5a1 1 0 1 1-2 0zm14 0V3a2 2 0 0 0-2-2h-5a1 1 0 1 0 0 2h5v5a1 1 0 1 0 2 0zm0 8v-5a1 1 0 1 0-2 0v5h-5a1 1 0 1 0 0 2h5a2 2 0 0 0 2-2zm-14 0v-5a1 1 0 1 1 2 0v5h5a1 1 0 1 1 0 2H3a2 2 0 0 1-2-2z"/>
                                                </svg>
                                                Ingrandisci
                    </button>
                </div>
            </div>

            <!-- area di gioco simulata -->
            <div id="playArea" style="flex:1;display:flex;align-items:center;justify-content:center;margin-top:12px">
                <div style="width:100%;height:220px;border-radius:8px;border:1px dashed #e6edf3;display:flex;align-items:center;justify-content:center;color:var(--muted)">
                    Area di gioco (demo)
                </div>
            </div>
        </div>

        <aside class="side-panel" id="sidePanel">
            <h4 style="margin-top:0; margin-left: 30px;">Altri giochi</h4>
            <div id="otherGamesList" style="margin-left: 30px; display: flex; flex-direction: row; gap: 16px;">
                <!-- populated by JS -->
            </div>
        </aside>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Hamburger menu
        const hamburger = document.getElementById('hamburger');
        let menu = document.getElementById('menu');
        if (!menu) {
            menu = document.createElement('nav');
            menu.id = 'menu';
            menu.className = 'menu';
            menu.style.position = 'absolute';
            menu.style.top = '64px';
            menu.style.left = '16px';
            menu.style.background = '#fff';
            menu.style.borderRadius = '10px';
            menu.style.boxShadow = '0 8px 30px rgba(2,6,23,0.08)';
            menu.style.padding = '8px 0';
            menu.style.minWidth = '220px';
            menu.style.display = 'none';
            menu.innerHTML = `
                <a href="index.html">Home</a>
                <a href="livello.html?livello=A1">Tutti i livelli</a>
                <a href="esercizi.html">Esercizi svolti</a>
                <a href="chisiamo.html">Informazioni</a>
            `;
            document.body.appendChild(menu);
        }
        hamburger.addEventListener('click', () => {
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        });
        document.addEventListener('click', (e) => {
            if (!hamburger.contains(e.target) && !menu.contains(e.target)) {
                menu.style.display = 'none';
            }
        });

        // Altri giochi
        const otherGamesList = document.getElementById('otherGamesList');
        const params = new URLSearchParams(window.location.search);
        const livello = params.get('livello') || '';
        const giocoAttuale = params.get('gioco') || '';
        const games = [
            { id: '1', title: 'Gioco 1' },
            { id: '2', title: 'Gioco 2' },
            { id: '3', title: 'Gioco 3' },
            { id: '4', title: 'Gioco 4' }
        ];
        games.forEach(game => {
            if (game.id !== giocoAttuale) {
                const link = document.createElement('a');
                link.href = `gioco.html?livello=${livello}&gioco=${game.id}`;
                link.textContent = game.title;
                link.style.color = 'black';
                link.style.textDecoration = 'none';
                link.style.fontWeight = 'bold';
                link.style.fontSize = '1rem';
                otherGamesList.appendChild(link);
            }
        });

        // Fullscreen YouTube style
        const btnFullscreen = document.getElementById('btn-fullscreen');
        const gameContainer = document.getElementById('gameContainer');
        // SVG YouTube style
        const svgExpand = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 14H5v5h5v-2H7v-3zm0-4h2V7h3V5H7v5zm10 10h-3v2h5v-5h-2v3zm0-14v3h2V3h-5v2h3z" fill="currentColor"/></svg>`;
        const svgReduce = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 15h2v3h3v2H5v-5zm9-9h3v3h2V5h-5V3zm-9 9v5h5v-2H7v-3H5zm14-4h-2V7h-3V5h5v5z" fill="currentColor"/></svg>`;
        btnFullscreen.innerHTML = `${svgExpand} Ingrandisci`;
        btnFullscreen.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                gameContainer.requestFullscreen();
                btnFullscreen.innerHTML = `${svgReduce} Riduci`;
            } else {
                document.exitFullscreen();
                btnFullscreen.innerHTML = `${svgExpand} Ingrandisci`;
            }
        });
    });
</script>

<style>
    @media (max-width: 768px) {
        .game-view {
            flex-direction: column;
        }

        .game-container {
            width: 100%;
            margin-bottom: 16px;
        }

        .side-panel {
            width: 100%;
        }
    }
</style>
</body>
</html>